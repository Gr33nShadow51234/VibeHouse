--------------------------------------------------------Saber Simulator--------------------------------------------------------

if not game:IsLoaded() then game.Loaded:Wait() end

for i,v in pairs(getconnections(game.Players.LocalPlayer.Idled)) do
    v:Disable()
end

_G.Swing = false
_G.BuyAll = false
_G.AttackBoss = false
_G.Loop = false

local a = require(game:GetService("Players").LocalPlayer.PlayerGui.Gui.LocalScript.Locations) a.CheckInArena = function() return true end
local b = require(game:GetService("Players").LocalPlayer.PlayerGui.Gui.LocalScript.Extra)
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local candyFarmed = {}
local StatsModule = require(game.ReplicatedStorage.Modules:WaitForChild("StatsModule", math.huge))
local UpdateData = ReplicatedStorage.Events.UpdateData
local Clicked = ReplicatedStorage.Events.Clicked
local Sell = ReplicatedStorage.Events.Sell
local BuyAll = ReplicatedStorage.Events.BuyAll
local Clicked = ReplicatedStorage.Events.Clicked

if player.Character ~= nil then
    if player.Character:FindFirstChild("AntiPort") then
        player.Character.AntiPort:Remove()
    end
    if player.Character:FindFirstChild("AntiPortNew") then
        player.Character.AntiPortNew:Remove()
    end
end

player.CharacterAdded:Connect(function(char)
    char:WaitForChild("AntiPort", math.huge):Remove()
    char:WaitForChild("AntiPortNew", math.huge):Remove()
end)

b.ShorterNumber = function(number)
    local abbreviations = {
        MF = 10^162; ME = 10^159; MD = 10^156; MC = 10^153; MB = 10^150; MA = 10^147; kZ = 10^144; kY = 10^141; kX = 10^138; kW = 10^135; kV = 10^132; kU = 10^129; kT = 10^126; kS = 10^123; kR = 10^120; kQ = 10^117; kP = 10^114;kO = 10^111; kN = 10^108; kM = 10^105; kL = 10^102; kK = 10^99; kJ = 10^96; kI = 10^93; kH = 10^90; kG = 10^87; kF = 10^84;kE = 10^81; kD = 10^78; kC = 10^75; kB = 10^72; kA = 10^69; c = 10^66; v = 10^63; N = 10^60; O = 10^57; St = 10^54; Sd = 10^51; Qd = 10^48; Qt = 10^45; T = 10^42; D = 10^39; U = 10^36; d = 10^33; n = 10^30; o = 10^27; S = 10^24; s = 10^21; Q = 10^18; q = 10^15; t = 10^12; B = 10^9; M = 10^6; K = 10^3
    }

    local abbreviatedNum = number
    local abbreviationChosen = 0

    for abbreviation, num in pairs(abbreviations) do
        if number >= num and num > abbreviationChosen then
            local shortNum = number / num
            local intNum = math.floor(shortNum * 1000)
            local finalNum = intNum / 1000
            
            abbreviatedNum = tostring(finalNum) .. abbreviation
            abbreviationChosen = num
        end
    end

    return abbreviatedNum
end

local Mercury = loadstring(game:HttpGet("https://raw.githubusercontent.com/Gr33nShadow51234/Glizzy/main/Mercury"))()

local GUI = Mercury:Create{
    Name = "SaberSim",
    Size = UDim2.fromOffset(600, 400),
    Theme = Mercury.Themes.Vibe,
    Link = "https://vibehouse.de/"
}

-- Main Tab --

local mainTab = GUI:Tab{
	Name = "Main",
	Icon = "rbxassetid://9741693218"
}

mainTab:Toggle{
	Name = "Auto Swing",
	StartingState = _G.Swing,
	Description = nil,
	Callback = function(state)
    _G.Swing = state
        while _G.Swing and task.wait(.05) do
            Clicked:FireServer()
        end
    end
}

mainTab:Toggle{
	Name = "Auto Buy All Sabers",
	StartingState = _G.BuyAll,
	Description = nil,
	Callback = function(state)
        _G.BuyAll = state
        while _G.BuyAll and task.wait(4) do
            BuyAll:FireServer("Swords")
        end
    end
}

mainTab:Toggle{
	Name = "Auto Buy All DNA",
	StartingState = _G.BuyAll,
	Description = nil,
	Callback = function(state)
        _G.BuyAll = state
        while _G.BuyAll and task.wait(4) do
            BuyAll:FireServer("Backpacks")
        end
    end
}


mainTab:Toggle{
	Name = "Kill Boss",
	StartingState = _G.AttackBoss,
	Description = nil,
	Callback = function(state)
        _G.AttackBoss = state

        while _G.AttackBoss and task.wait(.05) do
            if player.Character ~= nil and player.Character:FindFirstChildOfClass("Tool") and player.Character:FindFirstChildOfClass("Tool"):FindFirstChild("TouchInterest", true) then
                if workspace:FindFirstChild("Boss") or workspace.Mobs:FindFirstChild("HumanoidRootPart", true) then
                    pcall(function()
                        player.Character:FindFirstChildOfClass("Tool").RemoteClick:FireServer()
                        if workspace:FindFirstChild("Boss") then
                            firetouchinterest(workspace.Boss.HumanoidRootPart, player.Character:FindFirstChildOfClass("Tool"):FindFirstChild("TouchInterest", true).Parent, 0)
                            firetouchinterest(workspace.Boss.HumanoidRootPart, player.Character:FindFirstChildOfClass("Tool"):FindFirstChild("TouchInterest", true).Parent, 1)
                        end
                        for i,v in pairs(workspace.Mobs:GetChildren()) do
                            if v:FindFirstChild("HumanoidRootPart") then
                                firetouchinterest(v.HumanoidRootPart, player.Character:FindFirstChildOfClass("Tool"):FindFirstChild("TouchInterest", true).Parent, 0)
                                firetouchinterest(v.HumanoidRootPart, player.Character:FindFirstChildOfClass("Tool"):FindFirstChild("TouchInterest", true).Parent, 1)
                            end
                        end
                    end)
                end 
            end
        end
    end
}

mainTab:Toggle{
	Name = "Farm Candy",
	StartingState = _G.Loop,
	Description = nil,
	Callback = function(state)
        _G.Loop = state

        player.PlayerScripts.Candy.Disabled = true

        while _G.Loop and task.wait() do
            for i,v in ipairs(workspace.CandyHolder:GetChildren()) do
                if not candyFarmed[v] and _G.Loop then
                    player.Character.HumanoidRootPart.CFrame = v.CFrame
                    task.wait(.15)
                    game.ReplicatedStorage.Events.CollectCandy:FireServer(v)
                    game.ReplicatedStorage.Events.UpdateData:InvokeServer()
                    candyFarmed[v] = tick()
                elseif (tick() - candyFarmed[v]) > 30 and _G.Loop then
                    player.Character.HumanoidRootPart.CFrame = v.CFrame
                    task.wait(.15)
                    game.ReplicatedStorage.Events.CollectCandy:FireServer(v)
                    game.ReplicatedStorage.Events.UpdateData:InvokeServer()
                    candyFarmed[v] = tick()
                end
            end
        end
    end
}

mainTab:Button{
	Name = "Sell Amount",
	Description = nil,
	Callback = function()
        local c = game.ReplicatedStorage.Events.UpdateData:InvokeServer()

        GUI:Notification{
            Title = "Sell Amount",
            Text = b.ShorterNumber(c.Strength * StatsModule.getSellMulti(game.Players.LocalPlayer,c)),
            Duration = 5,
            Callback = function() end
        }
    end
}
-- Misc Tab--

local miscTab = GUI:Tab{
	Name = "misc",
	Icon = nil
}

miscTab:Button{
	Name = "TP Last Island",
	Description = nil,
	Callback = function()
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(787.90, 524258.625, -339.313)
    end
}
miscTab:Button{
	Name = "TP Shop",
	Description = nil,
	Callback = function()
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(471.650, 184.501, 50.5950)
    end
}
-- Notification --

GUI:Notification{
	Title = "Notification!",
	Text = "U can close the GUI with RIGHTSHIFT",
	Duration = 8,
	Callback = function() end
}

GUI:Credit{
	Name = "ImperatorWeeds",
	Description = "Made 3/4 of the Scripts",
	V3rm = "https://v3rmillion.net/member.php?action=profile&uid=1337989",
	Discord = "ImperatorWeeds#8893"
}

warn("Scripts made by ImperatorWeeds")
warn("UI by Floppa")
